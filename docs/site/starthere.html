
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Reactive and Embeddable rules engine">
      
      
        <meta name="author" content="Dark Submarine_">
      
      
        <link rel="canonical" href="https://www.darksubmarine.com/starthere.html">
      
      <link rel="icon" href="img/favicon.png">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-8.3.0">
    
    
      
        <title>Quick Start - Goldfish-RE</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.fd896c8a.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.cbb835fc.min.css">
        
          
          
          <meta name="theme-color" content="#ffffff">
        
      
      
  
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
  
  <style>:root{--md-admonition-icon--note:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M2.5 7.775V2.75a.25.25 0 0 1 .25-.25h5.025a.25.25 0 0 1 .177.073l6.25 6.25a.25.25 0 0 1 0 .354l-5.025 5.025a.25.25 0 0 1-.354 0l-6.25-6.25a.25.25 0 0 1-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.75 1.75 0 0 1 1 7.775zM6 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/></svg>');--md-admonition-icon--abstract:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M2.5 1.75a.25.25 0 0 1 .25-.25h8.5a.25.25 0 0 1 .25.25v7.736a.75.75 0 1 0 1.5 0V1.75A1.75 1.75 0 0 0 11.25 0h-8.5A1.75 1.75 0 0 0 1 1.75v11.5c0 .966.784 1.75 1.75 1.75h3.17a.75.75 0 0 0 0-1.5H2.75a.25.25 0 0 1-.25-.25V1.75zM4.75 4a.75.75 0 0 0 0 1.5h4.5a.75.75 0 0 0 0-1.5h-4.5zM4 7.75A.75.75 0 0 1 4.75 7h2a.75.75 0 0 1 0 1.5h-2A.75.75 0 0 1 4 7.75zm11.774 3.537a.75.75 0 0 0-1.048-1.074L10.7 14.145 9.281 12.72a.75.75 0 0 0-1.062 1.058l1.943 1.95a.75.75 0 0 0 1.055.008l4.557-4.45z"/></svg>');--md-admonition-icon--info:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 1.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13zM0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm6.5-.25A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75zM8 6a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/></svg>');--md-admonition-icon--tip:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M3.499.75a.75.75 0 0 1 1.5 0v.996C5.9 2.903 6.793 3.65 7.662 4.376l.24.202c-.036-.694.055-1.422.426-2.163C9.1.873 10.794-.045 12.622.26 14.408.558 16 1.94 16 4.25c0 1.278-.954 2.575-2.44 2.734l.146.508.065.22c.203.701.412 1.455.476 2.226.142 1.707-.4 3.03-1.487 3.898C11.714 14.671 10.27 15 8.75 15h-6a.75.75 0 0 1 0-1.5h1.376a4.489 4.489 0 0 1-.563-1.191 3.833 3.833 0 0 1-.05-2.063 4.636 4.636 0 0 1-2.025-.293.75.75 0 1 1 .525-1.406c1.357.507 2.376-.006 2.698-.318l.009-.01a.748.748 0 0 1 1.06 0 .75.75 0 0 1-.012 1.074c-.912.92-.992 1.835-.768 2.586.221.74.745 1.337 1.196 1.621H8.75c1.343 0 2.398-.296 3.074-.836.635-.507 1.036-1.31.928-2.602-.05-.603-.216-1.224-.422-1.93l-.064-.221c-.12-.407-.246-.84-.353-1.29a2.404 2.404 0 0 1-.507-.441 3.063 3.063 0 0 1-.633-1.248.75.75 0 0 1 1.455-.364c.046.185.144.436.31.627.146.168.353.305.712.305.738 0 1.25-.615 1.25-1.25 0-1.47-.95-2.315-2.123-2.51-1.172-.196-2.227.387-2.706 1.345-.46.92-.27 1.774.019 3.062l.042.19a.753.753 0 0 1 .01.05c.348.443.666.949.94 1.553a.75.75 0 1 1-1.365.62c-.553-1.217-1.32-1.94-2.3-2.768a85.08 85.08 0 0 0-.317-.265c-.814-.68-1.75-1.462-2.692-2.619a3.74 3.74 0 0 0-1.023.88c-.406.495-.663 1.036-.722 1.508.116.122.306.21.591.239.388.038.797-.06 1.032-.19a.75.75 0 0 1 .728 1.31c-.515.287-1.23.439-1.906.373-.682-.067-1.473-.38-1.879-1.193L.75 5.677V5.5c0-.984.48-1.94 1.077-2.664.46-.559 1.05-1.055 1.673-1.353V.75z"/></svg>');--md-admonition-icon--success:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.75.75 0 0 1 1.06-1.06L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0z"/></svg>');--md-admonition-icon--question:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 1.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13zM0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm9 3a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM6.92 6.085c.081-.16.19-.299.34-.398.145-.097.371-.187.74-.187.28 0 .553.087.738.225A.613.613 0 0 1 9 6.25c0 .177-.04.264-.077.318a.956.956 0 0 1-.277.245c-.076.051-.158.1-.258.161l-.007.004a7.728 7.728 0 0 0-.313.195 2.416 2.416 0 0 0-.692.661.75.75 0 0 0 1.248.832.956.956 0 0 1 .276-.245 6.3 6.3 0 0 1 .26-.16l.006-.004c.093-.057.204-.123.313-.195.222-.149.487-.355.692-.662.214-.32.329-.702.329-1.15 0-.76-.36-1.348-.863-1.725A2.76 2.76 0 0 0 8 4c-.631 0-1.155.16-1.572.438-.413.276-.68.638-.849.977a.75.75 0 1 0 1.342.67z"/></svg>');--md-admonition-icon--warning:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.22 1.754a.25.25 0 0 0-.44 0L1.698 13.132a.25.25 0 0 0 .22.368h12.164a.25.25 0 0 0 .22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0 1 14.082 15H1.918a1.75 1.75 0 0 1-1.543-2.575L6.457 1.047zM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-.25-5.25a.75.75 0 0 0-1.5 0v2.5a.75.75 0 0 0 1.5 0v-2.5z"/></svg>');--md-admonition-icon--failure:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M3.404 12.596a6.5 6.5 0 1 1 9.192-9.192 6.5 6.5 0 0 1-9.192 9.192zM2.344 2.343a8 8 0 1 0 11.313 11.314A8 8 0 0 0 2.343 2.343zM6.03 4.97a.75.75 0 0 0-1.06 1.06L6.94 8 4.97 9.97a.75.75 0 1 0 1.06 1.06L8 9.06l1.97 1.97a.75.75 0 1 0 1.06-1.06L9.06 8l1.97-1.97a.75.75 0 1 0-1.06-1.06L8 6.94 6.03 4.97z"/></svg>');--md-admonition-icon--danger:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M10.561 1.5a.016.016 0 0 0-.01.004L3.286 8.571A.25.25 0 0 0 3.462 9H6.75a.75.75 0 0 1 .694 1.034l-1.713 4.188 6.982-6.793A.25.25 0 0 0 12.538 7H9.25a.75.75 0 0 1-.683-1.06l2.008-4.418.003-.006a.02.02 0 0 0-.004-.009.02.02 0 0 0-.006-.006L10.56 1.5zM9.504.43a1.516 1.516 0 0 1 2.437 1.713L10.415 5.5h2.123c1.57 0 2.346 1.909 1.22 3.004l-7.34 7.142a1.25 1.25 0 0 1-.871.354h-.302a1.25 1.25 0 0 1-1.157-1.723L5.633 10.5H3.462c-1.57 0-2.346-1.909-1.22-3.004L9.503.429z"/></svg>');--md-admonition-icon--bug:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4.72.22a.75.75 0 0 1 1.06 0l1 .999a3.492 3.492 0 0 1 2.441 0l.999-1a.75.75 0 1 1 1.06 1.061l-.775.776c.616.63.995 1.493.995 2.444v.327c0 .1-.009.197-.025.292.408.14.764.392 1.029.722l1.968-.787a.75.75 0 0 1 .556 1.392L13 7.258V9h2.25a.75.75 0 0 1 0 1.5H13v.5c0 .409-.049.806-.141 1.186l2.17.868a.75.75 0 0 1-.557 1.392l-2.184-.873A4.997 4.997 0 0 1 8 16a4.997 4.997 0 0 1-4.288-2.427l-2.183.873a.75.75 0 0 1-.558-1.392l2.17-.868A5.013 5.013 0 0 1 3 11v-.5H.75a.75.75 0 0 1 0-1.5H3V7.258L.971 6.446a.75.75 0 0 1 .558-1.392l1.967.787c.265-.33.62-.583 1.03-.722a1.684 1.684 0 0 1-.026-.292V4.5c0-.951.38-1.814.995-2.444L4.72 1.28a.75.75 0 0 1 0-1.06zM6.173 5h3.654A.173.173 0 0 0 10 4.827V4.5a2 2 0 1 0-4 0v.327c0 .096.077.173.173.173zM5.25 6.5a.75.75 0 0 0-.75.75V11a3.5 3.5 0 1 0 7 0V7.25a.75.75 0 0 0-.75-.75h-5.5z"/></svg>');--md-admonition-icon--example:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M5 5.782V2.5h-.25a.75.75 0 0 1 0-1.5h6.5a.75.75 0 0 1 0 1.5H11v3.282l3.666 5.76C15.619 13.04 14.543 15 12.767 15H3.233c-1.776 0-2.852-1.96-1.899-3.458L5 5.782zM9.5 2.5h-3V6a.75.75 0 0 1-.117.403L4.73 9h6.54L9.617 6.403A.75.75 0 0 1 9.5 6V2.5zm-6.9 9.847L3.775 10.5h8.45l1.175 1.847a.75.75 0 0 1-.633 1.153H3.233a.75.75 0 0 1-.633-1.153z"/></svg>');--md-admonition-icon--quote:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.75 2.5a.75.75 0 0 0 0 1.5h10.5a.75.75 0 0 0 0-1.5H1.75zm4 5a.75.75 0 0 0 0 1.5h8.5a.75.75 0 0 0 0-1.5h-8.5zm0 5a.75.75 0 0 0 0 1.5h8.5a.75.75 0 0 0 0-1.5h-8.5zM2.5 7.75a.75.75 0 0 0-1.5 0v6a.75.75 0 0 0 1.5 0v-6z"/></svg>');}</style>

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:300,300i,400,400i,700,700i%7CUbuntu+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Ubuntu";--md-code-font:"Ubuntu Mono"}</style>
      
    
    
      <link rel="stylesheet" href="css/extra.css">
    
    <script>__md_scope=new URL(".",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="white" data-md-color-accent="red">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#installation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="index.html" title="Goldfish-RE" class="md-header__button md-logo" aria-label="Goldfish-RE" data-md-component="logo">
      
  <img src="img/logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Goldfish-RE
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Quick Start
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/darksubmarine/goldfish-re" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    darksubmarine/goldfish-re
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="Goldfish-RE" class="md-nav__button md-logo" aria-label="Goldfish-RE" data-md-component="logo">
      
  <img src="img/logo.svg" alt="logo">

    </a>
    Goldfish-RE
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/darksubmarine/goldfish-re" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    darksubmarine/goldfish-re
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        Introduction
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Quick Start
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="starthere.html" class="md-nav__link md-nav__link--active">
        Quick Start
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    Installation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quick-start" class="md-nav__link">
    Quick start
  </a>
  
    <nav class="md-nav" aria-label="Quick start">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ruleset-definition" class="md-nav__link">
    Ruleset definition
  </a>
  
    <nav class="md-nav" aria-label="Ruleset definition">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#activation-function" class="md-nav__link">
    Activation function
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-handler" class="md-nav__link">
    Error handler
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#facts-as-struct-fields" class="md-nav__link">
    Facts as struct fields
  </a>
  
    <nav class="md-nav" aria-label="Facts as struct fields">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#go-annotation" class="md-nav__link">
    Go annotation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#context" class="md-nav__link">
    Context
  </a>
  
    <nav class="md-nav" aria-label="Context">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#register-facts" class="md-nav__link">
    Register facts
  </a>
  
    <nav class="md-nav" aria-label="Register facts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#register-a-full-struct" class="md-nav__link">
    Register a full struct
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#register-field-by-field" class="md-nav__link">
    Register field by field
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update-facts" class="md-nav__link">
    Update facts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#context-into-onactivation-handler" class="md-nav__link">
    Context into onActivation handler
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="datatypes.html" class="md-nav__link">
        Data types
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="keyconcepts.html" class="md-nav__link">
        Key concepts
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="limitations.html" class="md-nav__link">
        Limitations
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    Installation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quick-start" class="md-nav__link">
    Quick start
  </a>
  
    <nav class="md-nav" aria-label="Quick start">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ruleset-definition" class="md-nav__link">
    Ruleset definition
  </a>
  
    <nav class="md-nav" aria-label="Ruleset definition">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#activation-function" class="md-nav__link">
    Activation function
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-handler" class="md-nav__link">
    Error handler
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#facts-as-struct-fields" class="md-nav__link">
    Facts as struct fields
  </a>
  
    <nav class="md-nav" aria-label="Facts as struct fields">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#go-annotation" class="md-nav__link">
    Go annotation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#context" class="md-nav__link">
    Context
  </a>
  
    <nav class="md-nav" aria-label="Context">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#register-facts" class="md-nav__link">
    Register facts
  </a>
  
    <nav class="md-nav" aria-label="Register facts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#register-a-full-struct" class="md-nav__link">
    Register a full struct
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#register-field-by-field" class="md-nav__link">
    Register field by field
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update-facts" class="md-nav__link">
    Update facts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#context-into-onactivation-handler" class="md-nav__link">
    Context into onActivation handler
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


  <h1>Quick Start</h1>

<h2 id="installation">Installation</h2>
<p>To install the library into your project please run:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a>go install github.com/darksubmarine/goldfish-re
</code></pre></div></td></tr></table></div>
<h2 id="quick-start">Quick start</h2>
<p>The library exposes a simple API to create conditions, rules, ruleset, facts and run the evaluation.</p>
<h3 id="ruleset-definition">Ruleset definition</h3>
<p>The following snippets illustrates how to create a ruleset for the next definition:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-1-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-1-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-1-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-1-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-1-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-1-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-1-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-1-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-1-10">10</a></span>
<span class="normal"><a href="#__codelineno-1-11">11</a></span>
<span class="normal"><a href="#__codelineno-1-12">12</a></span>
<span class="normal"><a href="#__codelineno-1-13">13</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a>Ruleset User flyer gold award
<a id="__codelineno-1-2" name="__codelineno-1-2"></a>    Rule frequent flyer
<a id="__codelineno-1-3" name="__codelineno-1-3"></a>    When
<a id="__codelineno-1-4" name="__codelineno-1-4"></a>        User.plan is gold
<a id="__codelineno-1-5" name="__codelineno-1-5"></a>        User.miles are greater than 300
<a id="__codelineno-1-6" name="__codelineno-1-6"></a>    Then
<a id="__codelineno-1-7" name="__codelineno-1-7"></a>        return ACTIVE_GOLD_AWARD
<a id="__codelineno-1-8" name="__codelineno-1-8"></a>
<a id="__codelineno-1-9" name="__codelineno-1-9"></a>    Rule user status update
<a id="__codelineno-1-10" name="__codelineno-1-10"></a>    When
<a id="__codelineno-1-11" name="__codelineno-1-11"></a>        User.status could be one of active, referred, VIP
<a id="__codelineno-1-12" name="__codelineno-1-12"></a>    Then
<a id="__codelineno-1-13" name="__codelineno-1-13"></a>        return ACTIVE_GOLD_AWARD_BY_STATUS_CHANGE
</code></pre></div></td></tr></table></div>
<div class="admonition info">
<p class="admonition-title">Termination rules</p>
<p>Note that so far the engine only supports termination rules, that means: the THEN part of the rule only can return
a string that will be sent to the activation function</p>
</div>
<p>The code should be written like:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-2-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-2-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-2-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-2-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-2-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-2-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-2-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-2-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-2-10">10</a></span>
<span class="normal"><a href="#__codelineno-2-11">11</a></span>
<span class="normal"><a href="#__codelineno-2-12">12</a></span>
<span class="normal"><a href="#__codelineno-2-13">13</a></span>
<span class="normal"><a href="#__codelineno-2-14">14</a></span>
<span class="normal"><a href="#__codelineno-2-15">15</a></span>
<span class="normal"><a href="#__codelineno-2-16">16</a></span>
<span class="normal"><a href="#__codelineno-2-17">17</a></span>
<span class="normal"><a href="#__codelineno-2-18">18</a></span>
<span class="normal"><a href="#__codelineno-2-19">19</a></span>
<span class="normal"><a href="#__codelineno-2-20">20</a></span>
<span class="normal"><a href="#__codelineno-2-21">21</a></span>
<span class="normal"><a href="#__codelineno-2-22">22</a></span>
<span class="normal"><a href="#__codelineno-2-23">23</a></span>
<span class="normal"><a href="#__codelineno-2-24">24</a></span>
<span class="normal"><a href="#__codelineno-2-25">25</a></span>
<span class="normal"><a href="#__codelineno-2-26">26</a></span>
<span class="normal"><a href="#__codelineno-2-27">27</a></span>
<span class="normal"><a href="#__codelineno-2-28">28</a></span>
<span class="normal"><a href="#__codelineno-2-29">29</a></span>
<span class="normal"><a href="#__codelineno-2-30">30</a></span>
<span class="normal"><a href="#__codelineno-2-31">31</a></span>
<span class="normal"><a href="#__codelineno-2-32">32</a></span>
<span class="normal"><a href="#__codelineno-2-33">33</a></span>
<span class="normal"><a href="#__codelineno-2-34">34</a></span>
<span class="normal"><a href="#__codelineno-2-35">35</a></span>
<span class="normal"><a href="#__codelineno-2-36">36</a></span>
<span class="normal"><a href="#__codelineno-2-37">37</a></span>
<span class="normal"><a href="#__codelineno-2-38">38</a></span>
<span class="normal"><a href="#__codelineno-2-39">39</a></span>
<span class="normal"><a href="#__codelineno-2-40">40</a></span>
<span class="normal"><a href="#__codelineno-2-41">41</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="kn">package</span><span class="w"> </span><span class="nx">main</span><span class="w"></span>
<a id="__codelineno-2-2" name="__codelineno-2-2"></a>
<a id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="kn">import</span><span class="w"> </span><span class="p">(</span><span class="w"></span>
<a id="__codelineno-2-4" name="__codelineno-2-4"></a><span class="w">    </span><span class="s">&quot;fmt&quot;</span><span class="w"></span>
<a id="__codelineno-2-5" name="__codelineno-2-5"></a>
<a id="__codelineno-2-6" name="__codelineno-2-6"></a><span class="w">    </span><span class="nx">gre</span><span class="w"> </span><span class="s">&quot;github.com/darksubmarine/goldfish-re&quot;</span><span class="w"></span>
<a id="__codelineno-2-7" name="__codelineno-2-7"></a><span class="p">)</span><span class="w"></span>
<a id="__codelineno-2-8" name="__codelineno-2-8"></a>
<a id="__codelineno-2-9" name="__codelineno-2-9"></a><span class="kd">func</span><span class="w"> </span><span class="nx">createRuleset</span><span class="p">()</span><span class="w"> </span><span class="nx">gre</span><span class="p">.</span><span class="nx">Ruleset</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-2-10" name="__codelineno-2-10"></a><span class="w">    </span><span class="c1">// C1: User.Plan == &quot;gold&quot;</span><span class="w"></span>
<a id="__codelineno-2-11" name="__codelineno-2-11"></a><span class="w">    </span><span class="nx">c1</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">gre</span><span class="p">.</span><span class="nx">Builder</span><span class="p">().</span><span class="nx">StringCondition</span><span class="p">().</span><span class="w"></span>
<a id="__codelineno-2-12" name="__codelineno-2-12"></a><span class="w">        </span><span class="nx">Term</span><span class="p">(</span><span class="s">&quot;User&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;plan&quot;</span><span class="p">).</span><span class="w"></span>
<a id="__codelineno-2-13" name="__codelineno-2-13"></a><span class="w">        </span><span class="nx">Equal</span><span class="p">(</span><span class="s">&quot;gold&quot;</span><span class="p">).</span><span class="w"></span>
<a id="__codelineno-2-14" name="__codelineno-2-14"></a><span class="w">        </span><span class="nx">Build</span><span class="p">()</span><span class="w"></span>
<a id="__codelineno-2-15" name="__codelineno-2-15"></a>
<a id="__codelineno-2-16" name="__codelineno-2-16"></a><span class="w">    </span><span class="c1">// C2: User.miles &gt; 300</span><span class="w"></span>
<a id="__codelineno-2-17" name="__codelineno-2-17"></a><span class="w">    </span><span class="nx">c2</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">gre</span><span class="p">.</span><span class="nx">Builder</span><span class="p">().</span><span class="nx">NumberCondition</span><span class="p">().</span><span class="nx">Term</span><span class="p">(</span><span class="s">&quot;User&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;miles&quot;</span><span class="p">).</span><span class="nx">GreaterThan</span><span class="p">(</span><span class="mi">300</span><span class="p">).</span><span class="nx">Build</span><span class="p">()</span><span class="w"></span>
<a id="__codelineno-2-18" name="__codelineno-2-18"></a>
<a id="__codelineno-2-19" name="__codelineno-2-19"></a><span class="w">    </span><span class="c1">// C3: User.status in [&quot;active&quot;, &quot;referred&quot;, &quot;VIP&quot;]</span><span class="w"></span>
<a id="__codelineno-2-20" name="__codelineno-2-20"></a><span class="w">    </span><span class="nx">c3</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">gre</span><span class="p">.</span><span class="nx">Builder</span><span class="p">().</span><span class="nx">StringCondition</span><span class="p">().</span><span class="w"></span>
<a id="__codelineno-2-21" name="__codelineno-2-21"></a><span class="w">        </span><span class="nx">Term</span><span class="p">(</span><span class="s">&quot;User&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;status&quot;</span><span class="p">).</span><span class="w"></span>
<a id="__codelineno-2-22" name="__codelineno-2-22"></a><span class="w">        </span><span class="nx">In</span><span class="p">([]</span><span class="kt">string</span><span class="p">{</span><span class="s">&quot;active&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;referred&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;VIP&quot;</span><span class="p">}).</span><span class="w"></span>
<a id="__codelineno-2-23" name="__codelineno-2-23"></a><span class="w">        </span><span class="nx">Build</span><span class="p">()</span><span class="w"></span>
<a id="__codelineno-2-24" name="__codelineno-2-24"></a>
<a id="__codelineno-2-25" name="__codelineno-2-25"></a><span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">frequentFlyer</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">gre</span><span class="p">.</span><span class="nx">Builder</span><span class="p">().</span><span class="nx">Rule</span><span class="p">().</span><span class="nx">AllOf</span><span class="p">(</span><span class="nx">c1</span><span class="p">,</span><span class="w"> </span><span class="nx">c2</span><span class="p">).</span><span class="nx">Then</span><span class="p">(</span><span class="s">&quot;ACTIVE_GOLD_AWARD&quot;</span><span class="p">).</span><span class="nx">Build</span><span class="p">()</span><span class="w"></span>
<a id="__codelineno-2-26" name="__codelineno-2-26"></a><span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">userStatusUpdate</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">gre</span><span class="p">.</span><span class="nx">Builder</span><span class="p">().</span><span class="nx">Rule</span><span class="p">().</span><span class="nx">AllOf</span><span class="p">(</span><span class="nx">c3</span><span class="p">).</span><span class="nx">Then</span><span class="p">(</span><span class="s">&quot;ACTIVE_GOLD_AWARD_BY_STATUS_CHANGE&quot;</span><span class="p">).</span><span class="nx">Build</span><span class="p">()</span><span class="w"></span>
<a id="__codelineno-2-27" name="__codelineno-2-27"></a>
<a id="__codelineno-2-28" name="__codelineno-2-28"></a><span class="w">    </span><span class="nx">rs</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">gre</span><span class="p">.</span><span class="nx">Builder</span><span class="p">().</span><span class="nx">Ruleset</span><span class="p">().</span><span class="w"></span>
<a id="__codelineno-2-29" name="__codelineno-2-29"></a><span class="w">        </span><span class="nx">OnActivation</span><span class="p">(</span><span class="kd">func</span><span class="p">(</span><span class="nx">then</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="nx">ctx</span><span class="w"> </span><span class="nx">gre</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-2-30" name="__codelineno-2-30"></a><span class="w">            </span><span class="c1">// Do soomething on activation (1)</span><span class="w"></span>
<a id="__codelineno-2-31" name="__codelineno-2-31"></a><span class="w">        </span><span class="p">}).</span><span class="w"></span>
<a id="__codelineno-2-32" name="__codelineno-2-32"></a><span class="w">        </span><span class="nx">OnError</span><span class="p">(</span><span class="kd">func</span><span class="p">(</span><span class="nx">err</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-2-33" name="__codelineno-2-33"></a><span class="w">            </span><span class="c1">// handle the error at your convenience (2)</span><span class="w"></span>
<a id="__codelineno-2-34" name="__codelineno-2-34"></a><span class="w">        </span><span class="p">}).</span><span class="w"></span>
<a id="__codelineno-2-35" name="__codelineno-2-35"></a><span class="w">        </span><span class="nx">Build</span><span class="p">()</span><span class="w"></span>
<a id="__codelineno-2-36" name="__codelineno-2-36"></a>
<a id="__codelineno-2-37" name="__codelineno-2-37"></a><span class="w">    </span><span class="nx">rs</span><span class="p">.</span><span class="nx">AddRule</span><span class="p">(</span><span class="nx">frequentFlyer</span><span class="p">)</span><span class="w"></span>
<a id="__codelineno-2-38" name="__codelineno-2-38"></a><span class="w">    </span><span class="nx">rs</span><span class="p">.</span><span class="nx">AddRule</span><span class="p">(</span><span class="nx">userStatusUpdate</span><span class="p">)</span><span class="w"></span>
<a id="__codelineno-2-39" name="__codelineno-2-39"></a>
<a id="__codelineno-2-40" name="__codelineno-2-40"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">rs</span><span class="w"></span>
<a id="__codelineno-2-41" name="__codelineno-2-41"></a><span class="p">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<ol>
<li>Activation function that receives the <code>then</code> value of the activated rule and the context <code>ctx</code> with all facts.</li>
<li>Error handler function receives the error and you can log it or do something else based on it.</li>
</ol>
<h4 id="activation-function">Activation function</h4>
<p>This function is a callback function that will be called each time that a rule returns <code>true</code> when a fact or facts are
updated.</p>
<p>The function receives the <code>then</code> value of the activated rule and a pointer to the evaluated context having available all
registered facts and objects into this one.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-3-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-3-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-3-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-3-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-3-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-3-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-3-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-3-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-3-10">10</a></span>
<span class="normal"><a href="#__codelineno-3-11">11</a></span>
<span class="normal"><a href="#__codelineno-3-12">12</a></span>
<span class="normal"><a href="#__codelineno-3-13">13</a></span>
<span class="normal"><a href="#__codelineno-3-14">14</a></span>
<span class="normal"><a href="#__codelineno-3-15">15</a></span>
<span class="normal"><a href="#__codelineno-3-16">16</a></span>
<span class="normal"><a href="#__codelineno-3-17">17</a></span>
<span class="normal"><a href="#__codelineno-3-18">18</a></span>
<span class="normal"><a href="#__codelineno-3-19">19</a></span>
<span class="normal"><a href="#__codelineno-3-20">20</a></span>
<span class="normal"><a href="#__codelineno-3-21">21</a></span>
<span class="normal"><a href="#__codelineno-3-22">22</a></span>
<span class="normal"><a href="#__codelineno-3-23">23</a></span>
<span class="normal"><a href="#__codelineno-3-24">24</a></span>
<span class="normal"><a href="#__codelineno-3-25">25</a></span>
<span class="normal"><a href="#__codelineno-3-26">26</a></span>
<span class="normal"><a href="#__codelineno-3-27">27</a></span>
<span class="normal"><a href="#__codelineno-3-28">28</a></span>
<span class="normal"><a href="#__codelineno-3-29">29</a></span>
<span class="normal"><a href="#__codelineno-3-30">30</a></span>
<span class="normal"><a href="#__codelineno-3-31">31</a></span>
<span class="normal"><a href="#__codelineno-3-32">32</a></span>
<span class="normal"><a href="#__codelineno-3-33">33</a></span>
<span class="normal"><a href="#__codelineno-3-34">34</a></span>
<span class="normal"><a href="#__codelineno-3-35">35</a></span>
<span class="normal"><a href="#__codelineno-3-36">36</a></span>
<span class="normal"><a href="#__codelineno-3-37">37</a></span>
<span class="normal"><a href="#__codelineno-3-38">38</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="kn">package</span><span class="w"> </span><span class="nx">main</span><span class="w"></span>
<a id="__codelineno-3-2" name="__codelineno-3-2"></a>
<a id="__codelineno-3-3" name="__codelineno-3-3"></a><span class="kn">import</span><span class="w"> </span><span class="p">(</span><span class="w"></span>
<a id="__codelineno-3-4" name="__codelineno-3-4"></a><span class="w">    </span><span class="s">&quot;fmt&quot;</span><span class="w"></span>
<a id="__codelineno-3-5" name="__codelineno-3-5"></a>
<a id="__codelineno-3-6" name="__codelineno-3-6"></a><span class="w">    </span><span class="nx">gre</span><span class="w"> </span><span class="s">&quot;github.com/darksubmarine/goldfish-re&quot;</span><span class="w"></span>
<a id="__codelineno-3-7" name="__codelineno-3-7"></a><span class="p">)</span><span class="w"></span>
<a id="__codelineno-3-8" name="__codelineno-3-8"></a>
<a id="__codelineno-3-9" name="__codelineno-3-9"></a><span class="kd">func</span><span class="w"> </span><span class="nx">yourActivationHandler</span><span class="p">(</span><span class="nx">then</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="nx">ctx</span><span class="w"> </span><span class="nx">gre</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-3-10" name="__codelineno-3-10"></a>
<a id="__codelineno-3-11" name="__codelineno-3-11"></a><span class="w">    </span><span class="k">switch</span><span class="w"> </span><span class="nx">then</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-3-12" name="__codelineno-3-12"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s">&quot;ACTIVE_GOLD_AWARD&quot;</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-3-13" name="__codelineno-3-13"></a><span class="w">        </span><span class="c1">// do something </span><span class="w"></span>
<a id="__codelineno-3-14" name="__codelineno-3-14"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s">&quot;ACTIVE_GOLD_AWARD_BY_STATUS_CHANGE&quot;</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-3-15" name="__codelineno-3-15"></a><span class="w">        </span><span class="c1">// do something relate with user status</span><span class="w"></span>
<a id="__codelineno-3-16" name="__codelineno-3-16"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a id="__codelineno-3-17" name="__codelineno-3-17"></a>
<a id="__codelineno-3-18" name="__codelineno-3-18"></a><span class="w">    </span><span class="c1">// iterate over the context all registered facts</span><span class="w"></span>
<a id="__codelineno-3-19" name="__codelineno-3-19"></a><span class="w">    </span><span class="nx">ctx</span><span class="p">.</span><span class="nx">ForEach</span><span class="p">(</span><span class="kd">func</span><span class="p">(</span><span class="nx">fact</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="nx">value</span><span class="w"> </span><span class="kd">interface</span><span class="p">{})</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-3-20" name="__codelineno-3-20"></a><span class="w">        </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%s=%v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">fact</span><span class="p">,</span><span class="w"> </span><span class="nx">value</span><span class="p">)</span><span class="w"> </span><span class="c1">// will print User.plan=gold or User.miles=500 or User.status=active</span><span class="w"></span>
<a id="__codelineno-3-21" name="__codelineno-3-21"></a><span class="w">    </span><span class="p">})</span><span class="w"></span>
<a id="__codelineno-3-22" name="__codelineno-3-22"></a>
<a id="__codelineno-3-23" name="__codelineno-3-23"></a><span class="w">    </span><span class="c1">// get the fact that you would like to work with</span><span class="w"></span>
<a id="__codelineno-3-24" name="__codelineno-3-24"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">usrPlan</span><span class="p">,</span><span class="w"> </span><span class="nx">ok</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">ctx</span><span class="p">.</span><span class="nx">Get</span><span class="p">(</span><span class="s">&quot;User.plan&quot;</span><span class="p">);</span><span class="w"> </span><span class="nx">ok</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-3-25" name="__codelineno-3-25"></a><span class="w">        </span><span class="k">switch</span><span class="w"> </span><span class="nx">pln</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">usrPlan</span><span class="p">.(</span><span class="kd">type</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-3-26" name="__codelineno-3-26"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="nx">gre</span><span class="p">.</span><span class="nx">String</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-3-27" name="__codelineno-3-27"></a><span class="w">            </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">&quot;fact type (string):&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">pln</span><span class="p">.</span><span class="nx">Value</span><span class="p">())</span><span class="w"></span>
<a id="__codelineno-3-28" name="__codelineno-3-28"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="nx">gre</span><span class="p">.</span><span class="nx">Number</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-3-29" name="__codelineno-3-29"></a><span class="w">            </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">&quot;fact type (number):&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">pln</span><span class="p">.</span><span class="nx">Value</span><span class="p">())</span><span class="w"></span>
<a id="__codelineno-3-30" name="__codelineno-3-30"></a><span class="w">        </span><span class="p">}</span><span class="w"></span>
<a id="__codelineno-3-31" name="__codelineno-3-31"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a id="__codelineno-3-32" name="__codelineno-3-32"></a>
<a id="__codelineno-3-33" name="__codelineno-3-33"></a><span class="w">    </span><span class="c1">// get the fact&#39;s parent object to access it and use other fields that are not facts. </span><span class="w"></span>
<a id="__codelineno-3-34" name="__codelineno-3-34"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">usr</span><span class="p">,</span><span class="w"> </span><span class="nx">ok</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">ctx</span><span class="p">.</span><span class="nx">GetObject</span><span class="p">(</span><span class="s">&quot;User&quot;</span><span class="p">);</span><span class="w"> </span><span class="nx">ok</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-3-35" name="__codelineno-3-35"></a><span class="w">        </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">obj</span><span class="p">.(</span><span class="o">*</span><span class="nx">User</span><span class="p">).</span><span class="nx">Email</span><span class="p">)</span><span class="w"></span>
<a id="__codelineno-3-36" name="__codelineno-3-36"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a id="__codelineno-3-37" name="__codelineno-3-37"></a>
<a id="__codelineno-3-38" name="__codelineno-3-38"></a><span class="p">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<div class="admonition tip">
<p class="admonition-title">Facts inference</p>
<p>Sometimes is needed performing an inference due to a facts change. The given <code>context</code> into the <code>onActivation</code> handler
will let you update facts in a thread-safe manner calling the cnotext method <code>Feedback</code>.
Please refer to <a href="#context-into-onactivation-handler">Context section</a> for more details.</p>
</div>
<h4 id="error-handler">Error handler</h4>
<p>If for some reason the evaluation ran into an error this callback function will be called letting you know about the error.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-4-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-4-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-4-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-4-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-4-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-4-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-4-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-4-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-4-10">10</a></span>
<span class="normal"><a href="#__codelineno-4-11">11</a></span>
<span class="normal"><a href="#__codelineno-4-12">12</a></span>
<span class="normal"><a href="#__codelineno-4-13">13</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="kn">package</span><span class="w"> </span><span class="nx">main</span><span class="w"></span>
<a id="__codelineno-4-2" name="__codelineno-4-2"></a>
<a id="__codelineno-4-3" name="__codelineno-4-3"></a><span class="kn">import</span><span class="w"> </span><span class="p">(</span><span class="w"></span>
<a id="__codelineno-4-4" name="__codelineno-4-4"></a><span class="w">    </span><span class="s">&quot;fmt&quot;</span><span class="w"></span>
<a id="__codelineno-4-5" name="__codelineno-4-5"></a><span class="w">    </span><span class="s">&quot;log&quot;</span><span class="w"></span>
<a id="__codelineno-4-6" name="__codelineno-4-6"></a>
<a id="__codelineno-4-7" name="__codelineno-4-7"></a><span class="w">    </span><span class="nx">gre</span><span class="w"> </span><span class="s">&quot;github.com/darksubmarine/goldfish-re&quot;</span><span class="w"></span>
<a id="__codelineno-4-8" name="__codelineno-4-8"></a><span class="p">)</span><span class="w"></span>
<a id="__codelineno-4-9" name="__codelineno-4-9"></a>
<a id="__codelineno-4-10" name="__codelineno-4-10"></a><span class="kd">func</span><span class="w"> </span><span class="nx">errorHandler</span><span class="p">(</span><span class="nx">err</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-4-11" name="__codelineno-4-11"></a><span class="w">    </span><span class="c1">// do something with the error</span><span class="w"></span>
<a id="__codelineno-4-12" name="__codelineno-4-12"></a><span class="w">    </span><span class="nx">log</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span><span class="w"></span>
<a id="__codelineno-4-13" name="__codelineno-4-13"></a><span class="p">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<h3 id="facts-as-struct-fields">Facts as struct fields</h3>
<p>Following the previous example we have an object <code>User</code> with 3 fields <code>plan</code> <code>miles</code> and <code>status</code>. 
Those attributes are the facts and can be defined into your go program as:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-1">1</a></span>
<span class="normal"><a href="#__codelineno-5-2">2</a></span>
<span class="normal"><a href="#__codelineno-5-3">3</a></span>
<span class="normal"><a href="#__codelineno-5-4">4</a></span>
<span class="normal"><a href="#__codelineno-5-5">5</a></span>
<span class="normal"><a href="#__codelineno-5-6">6</a></span>
<span class="normal"><a href="#__codelineno-5-7">7</a></span>
<span class="normal"><a href="#__codelineno-5-8">8</a></span>
<span class="normal"><a href="#__codelineno-5-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="kn">package</span><span class="w"> </span><span class="nx">main</span><span class="w"></span>
<a id="__codelineno-5-2" name="__codelineno-5-2"></a>
<a id="__codelineno-5-3" name="__codelineno-5-3"></a><span class="kn">import</span><span class="w"> </span><span class="nx">gre</span><span class="w"> </span><span class="s">&quot;github.com/darksubmarine/goldfish-re&quot;</span><span class="w"> </span>
<a id="__codelineno-5-4" name="__codelineno-5-4"></a>
<a id="__codelineno-5-5" name="__codelineno-5-5"></a><span class="kd">type</span><span class="w"> </span><span class="nx">User</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-5-6" name="__codelineno-5-6"></a><span class="w">    </span><span class="nx">plan</span><span class="w">   </span><span class="nx">gre</span><span class="p">.</span><span class="nx">String</span><span class="w"></span>
<a id="__codelineno-5-7" name="__codelineno-5-7"></a><span class="w">    </span><span class="nx">miles</span><span class="w">  </span><span class="nx">gre</span><span class="p">.</span><span class="nx">Number</span><span class="w"></span>
<a id="__codelineno-5-8" name="__codelineno-5-8"></a><span class="w">    </span><span class="nx">status</span><span class="w"> </span><span class="nx">gre</span><span class="p">.</span><span class="nx">String</span><span class="w"></span>
<a id="__codelineno-5-9" name="__codelineno-5-9"></a><span class="p">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<p>Where the struct name (User) matches with the fact object and the field name matches with the fact attribute. Also the
data type must be set using the Goldfish-RE data types in order to trigger an evaluation each time that a value is updated.</p>
<h4 id="go-annotation">Go annotation</h4>
<p>The library also supports Go tags to configure your facts. The tag must be written as:</p>
<p><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a>gre:&quot;object=User,attribute=plan,value=silver&quot;
</code></pre></div></td></tr></table></div>
where this is useful when you need to specify some custom values:</p>
<ul>
<li><strong>object</strong>: defines the object name for the given fact, useful to overwrite the struct name.</li>
<li><strong>attribute</strong>: sets the attribute name for the given fact if you need a name different to the struct field</li>
<li><strong>value</strong>: the default value which the fact will be initialized. Possible values<ul>
<li><em>String</em>:  <code>value=some string value</code></li>
<li><em>Number</em>: <code>value=234</code></li>
<li><em>Float</em>: <code>value=73.2</code></li>
<li><em>Boolean</em>: <code>value=true</code></li>
<li><em>Date</em>: <code>value=1984-12-24T00:00:00</code></li>
</ul>
</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-1">1</a></span>
<span class="normal"><a href="#__codelineno-7-2">2</a></span>
<span class="normal"><a href="#__codelineno-7-3">3</a></span>
<span class="normal"><a href="#__codelineno-7-4">4</a></span>
<span class="normal"><a href="#__codelineno-7-5">5</a></span>
<span class="normal"><a href="#__codelineno-7-6">6</a></span>
<span class="normal"><a href="#__codelineno-7-7">7</a></span>
<span class="normal"><a href="#__codelineno-7-8">8</a></span>
<span class="normal"><a href="#__codelineno-7-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="kn">package</span><span class="w"> </span><span class="nx">main</span><span class="w"></span>
<a id="__codelineno-7-2" name="__codelineno-7-2"></a>
<a id="__codelineno-7-3" name="__codelineno-7-3"></a><span class="kn">import</span><span class="w"> </span><span class="nx">gre</span><span class="w"> </span><span class="s">&quot;github.com/darksubmarine/goldfish-re&quot;</span><span class="w"> </span>
<a id="__codelineno-7-4" name="__codelineno-7-4"></a>
<a id="__codelineno-7-5" name="__codelineno-7-5"></a><span class="kd">type</span><span class="w"> </span><span class="nx">User</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-7-6" name="__codelineno-7-6"></a><span class="w">    </span><span class="nx">Plan</span><span class="w">   </span><span class="nx">gre</span><span class="p">.</span><span class="nx">String</span><span class="w"> </span><span class="s">`gre:&quot;attribute=plan,value=silver&quot;`</span><span class="w"></span>
<a id="__codelineno-7-7" name="__codelineno-7-7"></a><span class="w">    </span><span class="nx">Miles</span><span class="w">  </span><span class="nx">gre</span><span class="p">.</span><span class="nx">Number</span><span class="w"> </span><span class="s">`gre:&quot;attribute=miles,value=500&quot;`</span><span class="w"></span>
<a id="__codelineno-7-8" name="__codelineno-7-8"></a><span class="w">    </span><span class="nx">Status</span><span class="w"> </span><span class="nx">gre</span><span class="p">.</span><span class="nx">String</span><span class="w"> </span><span class="s">`gre:&quot;attribute=status,value=none&quot;`</span><span class="w"></span>
<a id="__codelineno-7-9" name="__codelineno-7-9"></a><span class="p">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<div class="admonition danger">
<p class="admonition-title">Exported fields</p>
<p>In order to use the Go tags to configure the facts, is mandatory exporting the fields otherwise the
context registration will fail.</p>
</div>
<h3 id="context">Context</h3>
<p>Once that you have a <code>ruleset</code> what do you need is a <code>context</code> to eval your facts against the ruleset. That means:</p>
<ul>
<li>A context is created from a ruleset: <code>rs.Context()</code></li>
<li>Each ruleset has only one context</li>
<li>The facts are thread-safe into the same context via <code>ctx.Update</code> method</li>
<li>The facts are not thread-safe between different context</li>
</ul>
<h4 id="register-facts">Register facts</h4>
<p>In order to run evaluations against the ruleset each time that a Fact is updated, is required to register the facts into a Context.</p>
<div class="admonition info">
<p>Register methods do not run a ruleset evaluation. Only register the facts with their <code>zero</code>/<code>default</code> values into the context.
The evaluation happens when a <code>context.Update</code> is called and the facts are modified via a transaction <code>Tx</code></p>
</div>
<p>To do this the Context struct has some methods:</p>
<h5 id="register-a-full-struct">Register a full struct</h5>
<p><code>ctx.Register(obj interface{})</code>: This method is the most useful when you have a struct with facts to be registered.
 Also fetchs the tags and applies its configuration. Returns an error if the registration process fails.</p>
<p>For instance:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-8-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-8-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-8-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-8-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-8-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-8-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-8-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-8-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-8-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="kd">type</span><span class="w"> </span><span class="nx">User</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-8-2" name="__codelineno-8-2"></a><span class="w">    </span><span class="nx">Plan</span><span class="w">   </span><span class="nx">gre</span><span class="p">.</span><span class="nx">String</span><span class="w"> </span><span class="s">`gre:&quot;attribute=plan,value=silver&quot;`</span><span class="w"></span>
<a id="__codelineno-8-3" name="__codelineno-8-3"></a><span class="w">    </span><span class="nx">Miles</span><span class="w">  </span><span class="nx">gre</span><span class="p">.</span><span class="nx">Number</span><span class="w"> </span><span class="s">`gre:&quot;attribute=miles,value=500&quot;`</span><span class="w"></span>
<a id="__codelineno-8-4" name="__codelineno-8-4"></a><span class="w">    </span><span class="nx">Status</span><span class="w"> </span><span class="nx">gre</span><span class="p">.</span><span class="nx">String</span><span class="w"> </span><span class="s">`gre:&quot;attribute=status,value=none&quot;`</span><span class="w"></span>
<a id="__codelineno-8-5" name="__codelineno-8-5"></a><span class="p">}</span><span class="w"></span>
<a id="__codelineno-8-6" name="__codelineno-8-6"></a>
<a id="__codelineno-8-7" name="__codelineno-8-7"></a><span class="nx">usr</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nb">new</span><span class="p">(</span><span class="nx">User</span><span class="p">)</span><span class="w"></span>
<a id="__codelineno-8-8" name="__codelineno-8-8"></a><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">ctx</span><span class="p">.</span><span class="nx">Register</span><span class="p">(</span><span class="nx">usr</span><span class="p">);</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-8-9" name="__codelineno-8-9"></a><span class="w">    </span><span class="c1">// error on registration</span><span class="w"></span>
<a id="__codelineno-8-10" name="__codelineno-8-10"></a><span class="p">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div></p>
<h5 id="register-field-by-field">Register field by field</h5>
<p>In addition to the <code>Register</code> method it is possible registering individual field with its data type:</p>
<ul>
<li><code>RegisterString(object interface{}, attribute String)</code></li>
<li><code>RegisterNumber(object interface{}, attribute Number)</code></li>
<li><code>RegisterFloat(object interface{}, attribute Float)</code></li>
<li><code>RegisterBoolean(object interface{}, attribute Boolean)</code></li>
<li><code>RegisterDate(object interface{}, attribute Date)</code></li>
</ul>
<p>For instance:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-1">1</a></span>
<span class="normal"><a href="#__codelineno-9-2">2</a></span>
<span class="normal"><a href="#__codelineno-9-3">3</a></span>
<span class="normal"><a href="#__codelineno-9-4">4</a></span>
<span class="normal"><a href="#__codelineno-9-5">5</a></span>
<span class="normal"><a href="#__codelineno-9-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="kd">type</span><span class="w"> </span><span class="nx">User</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-9-2" name="__codelineno-9-2"></a><span class="w">    </span><span class="nx">Plan</span><span class="w">   </span><span class="nx">gre</span><span class="p">.</span><span class="nx">String</span><span class="w"></span>
<a id="__codelineno-9-3" name="__codelineno-9-3"></a><span class="p">}</span><span class="w"></span>
<a id="__codelineno-9-4" name="__codelineno-9-4"></a>
<a id="__codelineno-9-5" name="__codelineno-9-5"></a><span class="nx">usr</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">User</span><span class="p">{</span><span class="w"> </span><span class="nx">Plan</span><span class="p">:</span><span class="w"> </span><span class="nx">gre</span><span class="p">.</span><span class="nx">NewString</span><span class="p">(</span><span class="s">&quot;User&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;plan&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;gold&quot;</span><span class="p">)}</span><span class="w"></span>
<a id="__codelineno-9-6" name="__codelineno-9-6"></a><span class="nx">ctx</span><span class="p">.</span><span class="nx">RegisterString</span><span class="p">(</span><span class="nx">usr</span><span class="p">,</span><span class="w"> </span><span class="nx">usr</span><span class="p">.</span><span class="nx">Plan</span><span class="p">)</span><span class="w"></span>
</code></pre></div></td></tr></table></div></p>
<h4 id="update-facts">Update facts</h4>
<p>Each time that a fact or facts are updated a ruleset evaluation must be run in order to check if some variation activates any rule.</p>
<p>The context object exposes a method to execute fact updates in a thread-safe mode. Each call is a locking call and returns the control
when the success function (<code>onActivation</code>) has finished.  </p>
<div class="admonition tip">
<p class="admonition-title">Improving performance</p>
<p>To improve performance your success function could be executed as a go routine.
Have into account to copy the context facts if you need it because, to avoid degrade performance, are pointers to the main ruleset context.</p>
</div>
<p>Calling <code>context.Update</code> you can update multiples facts at once in a transactional way and after that the evaluation will be trigger.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-10-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-10-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-10-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-10-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-10-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-10-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-10-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-10-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-10-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-10-10">10</a></span>
<span class="normal"><a href="#__codelineno-10-11">11</a></span>
<span class="normal"><a href="#__codelineno-10-12">12</a></span>
<span class="normal"><a href="#__codelineno-10-13">13</a></span>
<span class="normal"><a href="#__codelineno-10-14">14</a></span>
<span class="normal"><a href="#__codelineno-10-15">15</a></span>
<span class="normal"><a href="#__codelineno-10-16">16</a></span>
<span class="normal"><a href="#__codelineno-10-17">17</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="kn">package</span><span class="w"> </span><span class="nx">main</span><span class="w"></span>
<a id="__codelineno-10-2" name="__codelineno-10-2"></a>
<a id="__codelineno-10-3" name="__codelineno-10-3"></a><span class="kn">import</span><span class="w"> </span><span class="p">(</span><span class="w"></span>
<a id="__codelineno-10-4" name="__codelineno-10-4"></a><span class="w">    </span><span class="nx">gre</span><span class="w"> </span><span class="s">&quot;github.com/darksubmarine/goldfish-re&quot;</span><span class="w"></span>
<a id="__codelineno-10-5" name="__codelineno-10-5"></a><span class="w">    </span><span class="s">&quot;log&quot;</span><span class="w"></span>
<a id="__codelineno-10-6" name="__codelineno-10-6"></a><span class="p">)</span><span class="w"></span>
<a id="__codelineno-10-7" name="__codelineno-10-7"></a>
<a id="__codelineno-10-8" name="__codelineno-10-8"></a><span class="kd">func</span><span class="w"> </span><span class="nx">updateFacts</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-10-9" name="__codelineno-10-9"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">ctx</span><span class="p">.</span><span class="nx">Update</span><span class="p">(</span><span class="kd">func</span><span class="p">(</span><span class="nx">tx</span><span class="w"> </span><span class="o">*</span><span class="nx">gre</span><span class="p">.</span><span class="nx">Tx</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-10-10" name="__codelineno-10-10"></a><span class="w">        </span><span class="nx">tx</span><span class="p">.</span><span class="nx">SetString</span><span class="p">(</span><span class="nx">usr</span><span class="p">.</span><span class="nx">Status</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;active&quot;</span><span class="p">)</span><span class="w"></span>
<a id="__codelineno-10-11" name="__codelineno-10-11"></a><span class="w">        </span><span class="nx">tx</span><span class="p">.</span><span class="nx">SetNumber</span><span class="p">(</span><span class="nx">usr</span><span class="p">.</span><span class="nx">Miles</span><span class="p">,</span><span class="w"> </span><span class="mi">999</span><span class="p">)</span><span class="w"></span>
<a id="__codelineno-10-12" name="__codelineno-10-12"></a>
<a id="__codelineno-10-13" name="__codelineno-10-13"></a><span class="w">        </span><span class="nx">tx</span><span class="p">.</span><span class="nx">Error</span><span class="p">(</span><span class="nx">errors</span><span class="p">.</span><span class="nx">New</span><span class="p">(</span><span class="s">&quot;something was wrong&quot;</span><span class="p">))</span><span class="w"></span>
<a id="__codelineno-10-14" name="__codelineno-10-14"></a><span class="w">    </span><span class="p">});</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-10-15" name="__codelineno-10-15"></a><span class="w">        </span><span class="nx">log</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span><span class="w"></span>
<a id="__codelineno-10-16" name="__codelineno-10-16"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a id="__codelineno-10-17" name="__codelineno-10-17"></a><span class="p">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<p>The <code>ctx.Update</code> executes a function where a <code>tx *gre.Tx</code> is a transaction object and let you perform transactional 
updates to your facts and exposes a <code>tx.Error</code> method in case that you would like to return a custom error to avoid run 
the ruleset evaluation.</p>
<p>When an <code>error</code> is returned the transaction is not applied that means: fact changes are not updated (committed).</p>
<p>If you need updating only one fact, the context object exposes individual methods for each data type.</p>
<ul>
<li><code>SetString(attribute interface{}, value string) error</code></li>
<li><code>SetNumber(attribute interface{}, value int64) error</code></li>
<li><code>SetFloat(attribute interface{}, value float64) error</code></li>
<li><code>SetBoolean(attribute interface{}, value bool) error</code></li>
<li><code>SetDate(attribute interface{}, value time.Time) error</code></li>
</ul>
<p>For instance: 
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-11-1">1</a></span>
<span class="normal"><a href="#__codelineno-11-2">2</a></span>
<span class="normal"><a href="#__codelineno-11-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">ctx</span><span class="p">.</span><span class="nx">SetString</span><span class="p">(</span><span class="nx">usr</span><span class="p">.</span><span class="nx">Status</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;VIP&quot;</span><span class="p">);</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-11-2" name="__codelineno-11-2"></a><span class="w">    </span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span><span class="w"></span>
<a id="__codelineno-11-3" name="__codelineno-11-3"></a><span class="p">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div></p>
<div class="admonition warning">
<p class="admonition-title">Blocking method</p>
<p>The previous methods (<code>SetString, SetNumber, SetFloat, SetBoolean, SetDate</code>) are blocking methods that executes into a 
transaction meaning that in case of error the new value is not applied.</p>
</div>
<h4 id="context-into-onactivation-handler">Context into onActivation handler</h4>
<p>The context into the activation handler contains all the previous registered facts, so all facts are accessible to read it or to write it.
Also, the parent object to each fact can be accessed via the context. </p>
<p>The exposed API methods are described below:</p>
<p><strong>Fact Getters:</strong></p>
<p>These methods are useful to fetch a fact object given the fact name.</p>
<ul>
<li><code>Get(fact string) (interface{}, bool)</code></li>
<li><code>GetString(fact string) (String, error)</code></li>
<li><code>GetNumber(fact string) (Number, error)</code></li>
<li><code>GetFloat(fact string) (Float, error)</code></li>
<li><code>GetBoolean(fact string) (Boolean, error)</code></li>
<li><code>GetDate(fact string) (Date, error)</code></li>
</ul>
<p><strong>Iteration over all facts into the context</strong></p>
<p>This method is useful when you need to run an iteration over all facts into the context. An iteration function must be provided with
2 parameters: <code>fact</code> which is the fact name like <code>User.plan</code> and its value which in this case is an interface to match with all possible data types.</p>
<ul>
<li><code>ForEach(fn func(fact string, value interface{}))</code></li>
</ul>
<p><strong>Parent Object Getter</strong></p>
<p>This method fetch the parent object that contains a fact.</p>
<ul>
<li><code>GetObject(object string) (interface{}, bool)</code></li>
</ul>
<p><strong>Fact Inference (feedback)</strong>    </p>
<p>Sometimes when we are working with a ruleset where some facts depend on other facts is needed an inference mechanism. In this case we called 
<code>Feedback</code> due to each feedback will trigger a ruleset re-evaluation. The <code>Feedback</code> function is transactional, thread-safe, and it is called
from the <code>context.Update</code> life cycle. If the <code>tx.Error()</code> is executed into the <code>Feedback method</code> the error will be accessible as outcome of <code>context.Update</code>.</p>
<ul>
<li><code>Feedback(func(tx *Tx))</code></li>
</ul>
<div class="admonition example">
<p class="admonition-title">Advanced example</p>
<p>Please check the advanced example app into the <a href="https://github.com/darksubmarine/goldfish-re">goldfish-re</a> repo to see it in action!</p>
</div>

              
            </article>
            
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="index.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: Introduction" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Introduction
            </div>
          </div>
        </a>
      
      
        
        <a href="datatypes.html" class="md-footer__link md-footer__link--next" aria-label="Next: Data types" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Data types
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2022 Dark Submarine LLC
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://www.darksubmarine.com" target="_blank" rel="noopener" title="www.darksubmarine.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": ".", "features": ["content.code.annotate"], "search": "assets/javascripts/workers/search.b028fd86.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="assets/javascripts/bundle.0f659f14.min.js"></script>
      
    
  </body>
</html>